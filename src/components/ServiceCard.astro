---
export interface LegalService {
  title: string;
  description: string;
  icon: string;
  color: string;
}

interface Props {
  badge?: string;
  title?: string;
  subtitle?: string;
  services: LegalService[];
}

const {
  badge = "Features",
  title = "Complete Legal Solutions",
  subtitle = "Comprehensive immigration and legal services to help you navigate complex legal processes with expert guidance and support.",
  services = [],
} = Astro.props;

// Map of icon names to SVG paths and configurations
const iconMap: Record<
  string,
  { paths: string[]; viewBox?: string; fill?: boolean }
> = {
  "check-circle": {
    paths: [
      "M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",
      "M9 12L11 14L15 10",
    ],
  },
  "file-text": {
    paths: [
      "M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2Z",
      "M14 2V8H20",
      "M16 13H8",
      "M16 17H8",
      "M10 9H9H8",
    ],
  },
  "id-card": {
    paths: [
      "M3 4H21C21.5523 4 22 4.44772 22 5V19C22 19.5523 21.5523 20 21 20H3C2.44772 20 2 19.5523 2 19V5C2 4.44772 2.44772 4 3 4Z",
      "M7 8H17",
      "M7 12H17",
      "M7 16H17",
    ],
  },
  gavel: {
    paths: [
      "M1006 1006q-18 18-43 18t-43-18L471 557L366 662v1q18 18 18 43.5T366 750t-43.5 18t-43.5-18L18 489Q0 471 0 445.5T18 402t43.5-18t43.5 18l1 1l297-297l-1-1q-18-18-18-43.5T402 18t43.5-18T489 18l261 261q18 18 18 43.5T750 366t-43.5 18t-43.5-18l-1-1l-105 105l449 450q18 18 18 43t-18 43zM337 250l-86 87l181 181l86-86z",
    ],
    viewBox: "0 0 1024 1024",
    fill: true,
  },
  "shield-user": {
    paths: [
      "M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",
      "M6.376 18.91a6 6 0 0 1 11.249.003",
      "M12 11m-4 0a4 4 0 1 0 8 0a4 4 0 1 0-8 0",
    ],
    viewBox: "0 0 24 24",
    fill: false,
  },
  passport: {
    paths: [
      "M8 5a3 3 0 1 0 0 6 3 3 0 0 0 0-6M6 8a2 2 0 1 1 4 0 2 2 0 0 1-4 0m-.5 4a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1z",
      "M3.232 1.776A1.5 1.5 0 0 0 2 3.252v10.95c0 .445.191.838.49 1.11.367.422.908.688 1.51.688h8a2 2 0 0 0 2-2V4a2 2 0 0 0-1-1.732v-.47A1.5 1.5 0 0 0 11.232.321l-8 1.454ZM4 3h8a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1",
    ],
    viewBox: "0 0 16 16",
    fill: true,
  },
  shield: {
    paths: ["M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10Z"],
  },
  users: {
    paths: [
      "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",
      "M12 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z",
      "M22 21v-2a4 4 0 0 0-3-3.87",
      "M16 3.13a4 4 0 0 1 0 7.75",
    ],
  },
};

// Color configuration for different themes
const colorConfig = {
  indigo: {
    bg: "bg-indigo-50",
    hoverBg: "group-hover:bg-indigo-600",
    stroke: "stroke-indigo-600",
    fill: "fill-indigo-600",
    hoverStroke: "group-hover:stroke-white",
    hoverFill: "group-hover:fill-white",
  },
  pink: {
    bg: "bg-pink-50",
    hoverBg: "group-hover:bg-pink-600",
    stroke: "stroke-pink-600",
    fill: "fill-pink-600",
    hoverStroke: "group-hover:stroke-white",
    hoverFill: "group-hover:fill-white",
  },
  teal: {
    bg: "bg-teal-50",
    hoverBg: "group-hover:bg-teal-600",
    stroke: "stroke-teal-600",
    fill: "fill-teal-600",
    hoverStroke: "group-hover:stroke-white",
    hoverFill: "group-hover:fill-white",
  },
  orange: {
    bg: "bg-orange-50",
    hoverBg: "group-hover:bg-orange-600",
    stroke: "stroke-orange-600",
    fill: "fill-orange-600",
    hoverStroke: "group-hover:stroke-white",
    hoverFill: "group-hover:fill-white",
  },
  green: {
    bg: "bg-green-50",
    hoverBg: "group-hover:bg-green-600",
    stroke: "stroke-green-600",
    fill: "fill-green-600",
    hoverStroke: "group-hover:stroke-white",
    hoverFill: "group-hover:fill-white",
  },
  blue: {
    bg: "bg-blue-50",
    hoverBg: "group-hover:bg-blue-600",
    stroke: "stroke-blue-600",
    fill: "fill-blue-600",
    hoverStroke: "group-hover:stroke-white",
    hoverFill: "group-hover:fill-white",
  },
  purple: {
    bg: "bg-purple-50",
    hoverBg: "group-hover:bg-purple-600",
    stroke: "stroke-purple-600",
    fill: "fill-purple-600",
    hoverStroke: "group-hover:stroke-white",
    hoverFill: "group-hover:fill-white",
  },
  red: {
    bg: "bg-red-50",
    hoverBg: "group-hover:bg-red-600",
    stroke: "stroke-red-600",
    fill: "fill-red-600",
    hoverStroke: "group-hover:stroke-white",
    hoverFill: "group-hover:fill-white",
  },
} as const;

// Default fallback color
const defaultColor = colorConfig.indigo;

// Function to get icon configuration
function getIconConfig(iconName: string) {
  return iconMap[iconName] || iconMap["check-circle"];
}

// Function to get color configuration with fallback
function getColorConfig(colorName: string) {
  return colorConfig[colorName as keyof typeof colorConfig] || defaultColor;
}
---

<section class="py-14">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="mb-14 text-center">
      <!-- <h2 class="text-4xl text-center font-bold text-gray-900 py-5">
        {title}
      </h2>
      <p
        class="text-lg font-normal text-gray-500 max-w-md md:max-w-2xl mx-auto"
      >
        {subtitle}
      </p> -->

      <h1
        class="block font-extrabold text-heading text-4xl md:text-5xl lg:text-6xl"
      >
        <span>
          {title}
        </span>
        <!-- <span> From Our Clients </span> -->
      </h1>
    </div>

    {
      services.length > 0 && (
        <div class="slide-in-up flex justify-center items-center gap-x-5 gap-y-8 lg:gap-y-0 flex-wrap md:flex-wrap lg:flex-nowrap lg:flex-row lg:justify-between lg:gap-x-8">
          {services.map((service) => {
            const iconConfig = getIconConfig(service.icon);
            const colors = getColorConfig(service.color);

            return (
              <div class="relative w-full text-center max-md:max-w-sm max-md:mx-auto group md:w-2/5 lg:w-1/4">
                <div
                  class={`${colors.bg} rounded-lg flex justify-center items-center mb-5 w-20 h-20 mx-auto cursor-pointer transition-all duration-500 ${colors.hoverBg}`}
                >
                  <svg
                    class={`${iconConfig.fill ? colors.fill : colors.stroke} transition-all  slide-in-right duration-500 ${iconConfig.fill ? colors.hoverFill : colors.hoverStroke}`}
                    width="30"
                    height="30"
                    viewBox={iconConfig.viewBox || "0 0 24 24"}
                    fill={iconConfig.fill ? "currentColor" : "none"}
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    {iconConfig.paths.map((path, index) => (
                      // @ts-ignore-next-line Astro JSX: key prop for fragment
                      <Fragment key={index}>
                        <path
                          d={path}
                          stroke={iconConfig.fill ? undefined : ""}
                          stroke-width={iconConfig.fill ? undefined : "2"}
                          stroke-linecap={iconConfig.fill ? undefined : "round"}
                          stroke-linejoin={
                            iconConfig.fill ? undefined : "round"
                          }
                        />
                      </Fragment>
                    ))}
                  </svg>
                </div>
                <h4 class="text-lg font-medium text-gray-900 mb-3 capitalize">
                  {service.title}
                </h4>
                <p class="text-sm font-normal text-gray-500">
                  {service.description}
                </p>
              </div>
            );
          })}
        </div>
      )
    }
  </div>
</section>
